<script>
  const form = document.getElementById('loginForm');
  const messageDiv = document.getElementById('message');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    messageDiv.textContent = 'Processando...';
    messageDiv.style.color = 'blue';

    const formData = new FormData(form);
    const data = {
      matricula: formData.get('matricula'),
      senha: formData.get('senha'),
    };

    try {
      // Substitua pela URL real do seu backend no Railway
      const backendUrl = 'https://seu-projeto.up.railway.app';
      
      const res = await fetch(`${backendUrl}/login`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      });

      const result = await res.json();

      if (res.ok) {
        messageDiv.style.color = 'green';
        messageDiv.textContent = result.message;
      } else {
        messageDiv.style.color = 'red';
        messageDiv.textContent = result.message || 'Erro no login';
      }
    } catch (err) {
      console.error('Erro:', err);
      messageDiv.style.color = 'red';
      messageDiv.textContent = 'Erro ao conectar com o servidor. Verifique o console para detalhes.';
    }
  });

  // Teste de conexão inicial
  async function testarConexao() {
    try {
      const backendUrl = 'https://seu-projeto.up.railway.app';
      const res = await fetch(`${backendUrl}/health`);
      if (res.ok) {
        console.log('Conexão com o backend estabelecida!');
      }
    } catch (err) {
      console.error('Falha ao conectar com o backend:', err);
    }
  }

  // Executa o teste quando a página carrega
  window.addEventListener('load', testarConexao);
</script>
